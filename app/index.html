<div class="container">
    <section>
        <h3>
            Pay down your debts <em>fast</em>.
        </h3>

        <table>
            <thead>
                <tr>
                    <th>Debt</th>
                    <th>Principle</th>
                    <th>Annual Interest</th>
                    <th>Minimum Payment</th>
                </tr>
            </thead>

            <tbody>
                {{#with app=app debts=debts}}
                    {{#each debts}}
                        <tr>
                            <td>
                                {{>input app=app value=name field='name' binder=this placeholder='Debt Name'}}
                            </td>
                            <td>
                                {{>input app=app type='number' format='integer' value=principle field='principle' binder=this placeholder='100,000'}}
                            </td>
                            <td>
                                {{>input app=app type='number' format='float' value=rate field='rate' binder=this placeholder='2.98'}}
                            </td>
                            <td>
                                {{>input app=app type='number' format='integer' value=payment field='payment' binder=this placeholder='505'}}
                            </td>
                            <td>
                                <a href="#" onclick::{{@remove(app, debts, this)}}>x</a>
                                {{#if payment < @minimumPayment(this)}}
                                    [minimum: {{@minimumPayment(this)}}]
                                {{/if}}
                            </td>
                        </tr>
                    {{/each}}
                {{/with}}
            </tbody>

            <tfoot>
                <tr>
                    <td>
                        <button onclick::{{@add(app, debts)}}>Add Debt</button>
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
    </section>

    <section>
        <h3>
            How much extra $ can you afford to pay down these debts <em>fast</em>?
        </h3>

        {{>input app=app type='number' format='integer' value=extra field='extra' binder=this placeholder='500'}}
    </section>

    <section>
        {{$chart app=app type='line' data=@chart(debts, extra, showConsolidated, consolidatedRate)}}

        <label>
            {{>input app=app type='checkbox' checked=showConsolidated field='showConsolidated' binder=this format='boolean'}}
            Show Consolidated
            {{#if showConsolidated}}
                at {{>input app=app type='number' value=consolidatedRate field='consolidatedRate' binder=this placeholder=3.25 class='small'}}
            {{/if}}
        </label>
    </section>

    <section>
        <table>
            <thead>
                <tr>
                    <th class="with-padding align-center"><h3>Snowball</h3></th>
                    <th class="with-padding align-center">vs.</th>
                    <th class="with-padding align-center"><h3>Avalanche</h3></th>

                    {{#if showConsolidated}}
                        <th class="with-padding align-center">vs.</th>
                        <th class="with-padding align-center"><h3>Consolidated</h3></th>
                    {{/if}}
                </tr>

                <tr>
                    <th class="with-padding align-center">prioritizes the debts with the lowest balance</th>
                    <th class="with-padding align-center"></th>
                    <th class="with-padding align-center">puts the debt with the highest interest rate first</th>

                    {{#if showConsolidated}}
                        <th class="with-padding align-center"></th>
                        <th class="with-padding align-center">all debts in one loan</th>
                    {{/if}}
                </tr>
            </thead>

            {{#with snowball=(@snowball(debts, extra)) avalanche=(@avalanche(debts, extra)) consolidated=(@consolidated(debts, extra, consolidatedRate)) extra=extra}}
                <tbody>
                    <tr>
                        <td class="with-padding align-center">Paid off in {{snowball.totalMonths}} months</td>
                        <td class="with-padding align-center"></td>
                        <td class="with-padding align-center">Paid off in {{avalanche.totalMonths}} months</td>

                        {{#if showConsolidated}}
                            <td class="with-padding align-center"></td>
                            <td class="with-padding align-center">Paid off in {{consolidated.totalMonths}} months</td>
                        {{/if}}
                    </tr>

                    <tr>
                        <td class="with-padding align-center">
                            {{@currency(snowball.totalInterest)}} in Interest
                        </td>
                        <td class="with-padding align-center"></td>
                        <td class="with-padding align-center">
                            {{@currency(avalanche.totalInterest)}} in Interest
                        </td>

                        {{#if showConsolidated}}
                            <td class="with-padding align-center"></td>
                            <td class="with-padding align-center">
                                {{@currency(consolidated.totalInterest)}} in Interest
                            </td>
                        {{/if}}
                    </tr>

                    <tr>
                        <td class="with-padding align-center">
                            {{@currency(snowball.totalPaid)}} in Total
                        </td>
                        <td class="with-padding align-center"></td>
                        <td class="with-padding align-center">
                            {{@currency(avalanche.totalPaid)}} in Total
                        </td>

                        {{#if showConsolidated}}
                            <td class="with-padding align-center"></td>
                            <td class="with-padding align-center">
                                {{@currency(consolidated.totalPaid)}} in Total
                            </td>
                        {{/if}}
                    </tr>

                    <!-- {{#with snowballInterestDiff=(snowball.totalInterest - avalanche.totalInterest)}}
                        <tr>
                            <td class="with-padding align-center">
                                {{>diff amount=snowballInterestDiff}}
                            </td>
                            <td class="with-padding align-center"></td>
                            <td class="with-padding align-center">
                                {{>diff amount=(snowballInterestDiff * -1)}}
                            </td>
                        </tr>
                    {{/with}} -->
                </tbody>
            {{/with}}
        </table>
    </section>
</div>
